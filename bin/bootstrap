#!/bin/sh

PYTHON_VERSION=3.8.12

echo 'installing pyenv'
cd /tmp && git clone  https://github.com/pyenv/pyenv.git ~/.pyenv
{
  'export PYENV_ROOT="${HOME}/.pyenv"'
  'if [ -d "${PYENV_ROOT}" ]; then'
  '    export PATH=${PYENV_ROOT}/bin:$PATH'
  '    eval "$(pyenv init -)"'
  'fi'
} >> ~/.bashrc

echo 'installing apt libraries'
sudo apt install bzip2 libreadline6 libreadline6-dev libssl-dev curl

echo "installing python ${PYTHON_VERSION}"
pyenv install $PYTHON_VERSION

echo "installing poetry"
curl -sSL https://install.python-poetry.org | python3 -
